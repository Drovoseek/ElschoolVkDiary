{"version":3,"sources":["panels/Lesson.js","panels/Diary.js","panels/Settings.js","App.js","index.js"],"names":["DiaryLesson","props","formatStages","stages","stagesText","push","key","substring","indexOf","length","split","i","map","stage","text","url","href","mark","color","mark1","mark2","this","getMarkColor","parseInt","lesson","className","start","number","end","title","style","background","getMarkBlockColor","room","kind","videoconfTime","margin","homework","yaklass","React","Component","Home","loadLessons","day","self","_day","fetch","govnoApiToken","state","chosenDay","getFullYear","getMonth","getDate","crossDomain","method","withCredentials","then","response","json","setState","lessonsLoading","lessons","getRuMonth","monthNumber","chooseDay","showndatepicker","chosenWeek","getWeekNumber","month","Date","getTime","dayN","first","setDate","summ","getDay","animateDatepicker","apiToken","getMonthString","bind","getYearString","monday","week","last","setMonth","sunday","year","emptyStartWeekdays","emptyEndWeekdays","unshift","onClick","id","name","setTimeout","left","right","class","marginTop","size","SettingsPage","App","getToken","bridge","send","app_id","scope","result","userPicUrl","photo_200","access_token","apiResponse","token","activeView","console","log","error","e","hideMenu","activePanel","top","placeholder","header","mode","separator","src","Diary","Settings","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ba8fd90f.chunk.js","sourcesContent":["import React from \"react\";\r\nimport Icon24Videocam from \"@vkontakte/icons/dist/24/videocam\";\r\n\r\nclass DiaryLesson extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    getMarkBlockColor(mark) {\r\n        var color = \"\";\r\n        if (mark.indexOf(\"/\") > 0) {\r\n            color = \"linear-gradient(90deg, \";\r\n            var mark1 = mark.substring(0, mark.indexOf(\"/\"));\r\n            var mark2 = mark.substring(mark.indexOf(\"/\") + 1);\r\n            color += this.getMarkColor(mark1) + \",\" + this.getMarkColor(mark2);\r\n            color += \")\";\r\n        } else {\r\n            color = this.getMarkColor(mark);\r\n        }\r\n        return color;\r\n    }\r\n\r\n    getMarkColor(mark) {\r\n        mark = parseInt(mark);\r\n        switch (mark) {\r\n            case 1:\r\n                return \"#ffb6c1\";\r\n            case 2:\r\n                return \"#ffb6c1\";\r\n            case 3:\r\n                return \"#f0e68c\";\r\n            case 4:\r\n                return \"#87ceeb\";\r\n            case 5:\r\n                return \"#98fb98\";\r\n            default:\r\n                return \"#d3d3d3\";\r\n        }\r\n    }\r\n\r\n    formatStages = stages => {\r\n        var stagesText = [];\r\n        stagesText.push(<span key={0}>{stages.substring(0, stages.indexOf('\"materials_json_format'))}</span>);\r\n        stages = stages.substring(stages.indexOf('\"materials_json_format\":[') + 26, stages.length - 2);\r\n        stages = stages.split(\"},{\");\r\n        var i = 0;\r\n        stages.map(stage => {\r\n            i++;\r\n            var text = stage.substring(8, stage.indexOf('\",\"link\"'));\r\n            var url = stage.substring(stage.indexOf('\"link\"') + 8, stage.length - 1);\r\n            stagesText.push(\r\n                <div key={i}>\r\n                    {text}: <a href={url}>{url}</a>\r\n                </div>\r\n            );\r\n        });\r\n        return stagesText;\r\n    };\r\n\r\n    render() {\r\n        const lesson = this.props.lesson;\r\n        return (\r\n            <div className=\"lesson d-flex\">\r\n                <div className=\"lesson__timeline\"></div>\r\n                <div className=\"lesson__times d-flex flex-column\">\r\n                    <div className=\"lesson__start\">{lesson.start}</div>\r\n                    <div className=\"lesson__number\">{lesson.number}</div>\r\n                    <div className=\"lesson__end\">{lesson.end}</div>\r\n                </div>\r\n                <div className=\"lesson__card flex-grow-1\">\r\n                    <div className=\"d-flex\">\r\n                        <div className=\"lesson__title flex-grow-1\">{lesson.title}</div>\r\n                        {lesson.mark != null && (\r\n                            <div className=\"lesson__mark-wrapper\" style={{ background: this.getMarkBlockColor(lesson.mark) }}>\r\n                                <div className=\"lesson__mark\">{lesson.mark}</div>\r\n                                <div>Оценка</div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"d-flex\">\r\n                        <div className=\"lesson__number-room flex-grow-1\">\r\n                            {lesson.number} урок, каб. {lesson.room}\r\n                        </div>\r\n                        <div className=\"lesson__kind\">{lesson.kind}</div>\r\n                    </div>\r\n                    {lesson.videoconfTime != null && (\r\n                        <div className=\"lesson__videoconf d-flex\">\r\n                            <Icon24Videocam />\r\n                            <div style={{ margin: \"4px 0 0 5px\" }}>Видеоурок в {lesson.videoconfTime}</div>\r\n                        </div>\r\n                    )}\r\n                    {lesson.stages != null && <div className=\"lesson__stages\">{this.formatStages(lesson.stages)}</div>}\r\n                    <div className=\"lesson__homework\">{lesson.homework}</div>\r\n                    {lesson.yaklass ? <div className=\"lesson__yaklass\">Нужно пройти тест ЯКласс</div> : null}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default DiaryLesson;\r\n","import React from \"react\";\r\nimport { Spinner, Button } from \"@vkontakte/vkui\";\r\nimport Icon20CalendarOutline from \"@vkontakte/icons/dist/20/calendar_outline\";\r\nimport Icon24BrowserBack from \"@vkontakte/icons/dist/24/browser_back\";\r\nimport Icon24BrowserForward from \"@vkontakte/icons/dist/24/browser_forward\";\r\nimport Icon16Cancel from \"@vkontakte/icons/dist/16/cancel\";\r\nimport DiaryLesson from \"./Lesson\";\r\n\r\nclass Home extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showndatepicker: false,\r\n            chosenDay: new Date(),\r\n            chosenWeek: this.getWeekNumber(new Date()),\r\n            month: this.getMonth(new Date()),\r\n            lessons: [],\r\n            lessonsLoading: true,\r\n            animateDatepicker: true,\r\n            govnoApiToken: this.props.apiToken,\r\n        };\r\n        this.getMonthString = this.getMonthString.bind(this);\r\n        this.getYearString = this.getYearString.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadLessons(this.state.chosenDay);\r\n    }\r\n\r\n    loadLessons = day => {\r\n        var self = this;\r\n        var _day = day;\r\n        fetch('https://api.elschool.ru/vk/diary?token=' + this.props.govnoApiToken + '&date=' + this.state.chosenDay.getFullYear() + '.' + (this.state.chosenDay.getMonth() + 1) + '.' + this.state.chosenDay.getDate(), {\r\n            crossDomain: true,\r\n            method: \"GET\",\r\n            withCredentials: false,\r\n        }).then(response => response.json())\r\n        .then((response) => {\r\n            if (_day == self.state.chosenDay) {\r\n                self.setState({\r\n                    lessonsLoading: false,\r\n                    lessons: response,\r\n                });\r\n            }\r\n        });\r\n    };\r\n\r\n    getWeek(_day) {\r\n        var day = _day;\r\n        var monday = day.setDate(day.getDate() - day.getDay() + 1);\r\n        var week = [];\r\n        for (var i = 0; i < 7; i++) {\r\n            week.push(new Date(new Date(monday).setDate(new Date(monday).getDate() + i)));\r\n        }\r\n        return week;\r\n    }\r\n\r\n    getMonth(_day) {\r\n        var day = new Date(_day.getTime());\r\n        var first = new Date(day.setDate(1));\r\n        var last = new Date(day.setMonth(day.getMonth() + 1));\r\n        last.setDate(last.getDate() - 1);\r\n        var month = [];\r\n        for (var i = 1; i <= last.getDate(); i++) {\r\n            month.push(new Date(first.setDate(i)));\r\n        }\r\n        return month;\r\n    }\r\n\r\n    getMonthString(_day) {\r\n        var day = new Date(_day.getTime());\r\n        var month = \"\";\r\n        var monday = new Date(day.setDate(day.getDate() - (day.getDay() == 0 ? 7 : day.getDay()) + 1));\r\n        month += this.getRuMonth(monday.getMonth() + 1);\r\n        var sunday = new Date(day.setDate(day.getDate() + 6));\r\n        if (monday.getMonth() != sunday.getMonth()) {\r\n            month += \" - \" + this.getRuMonth(sunday.getMonth() + 1);\r\n        }\r\n        return month;\r\n    }\r\n\r\n    getRuMonth = monthNumber => {\r\n        switch (monthNumber) {\r\n            case 1:\r\n                return \"Январь\";\r\n            case 2:\r\n                return \"Февраль\";\r\n            case 3:\r\n                return \"Март\";\r\n            case 4:\r\n                return \"Апрель\";\r\n            case 5:\r\n                return \"Май\";\r\n            case 6:\r\n                return \"Июнь\";\r\n            case 7:\r\n                return \"Июль\";\r\n            case 8:\r\n                return \"Август\";\r\n            case 9:\r\n                return \"Сентябрь\";\r\n            case 10:\r\n                return \"Октябрь\";\r\n            case 11:\r\n                return \"Ноябрь\";\r\n            case 12:\r\n                return \"Декабрь\";\r\n        }\r\n    };\r\n\r\n    getYearString(_day) {\r\n        var day = new Date(_day.getTime());\r\n        var year = \"\";\r\n        var monday = new Date(day.setDate(day.getDate() - (day.getDay() == 0 ? 7 : day.getDay()) + 1));\r\n        year += monday.getFullYear();\r\n        var sunday = new Date(day.setDate(day.getDate() + 6));\r\n        if (monday.getFullYear() != sunday.getFullYear()) {\r\n            year += \" - \" + sunday.getFullYear();\r\n        }\r\n        return year;\r\n    }\r\n\r\n    chooseDay = day => {\r\n        this.setState({\r\n            showndatepicker: false,\r\n            chosenDay: day,\r\n            chosenWeek: this.getWeekNumber(day),\r\n            month: this.getMonth(day),\r\n            lessonsLoading: true\r\n        });\r\n        this.loadLessons(day);\r\n    };\r\n\r\n    getWeekNumber = _day => {\r\n        var day = new Date(_day.getTime());\r\n        var dayN = day.getDate();\r\n        var first = new Date(day.setDate(1));\r\n        var summ = (first.getDay() == 0 ? 7 : first.getDay()) + dayN - 2;\r\n        return (summ - (summ % 7)) / 7 + 1;\r\n    };\r\n\r\n    render() {\r\n        const emptyStartWeekdays = [],\r\n            emptyEndWeekdays = [];\r\n        for (var i = 1; i < (this.state.month[0].getDay() == 0 ? 7 : this.state.month[0].getDay()); i++) {\r\n            emptyStartWeekdays.unshift(\r\n                <div key={i} className=\"col-1-of-7 text-center datepicker__day-wrapper\">\r\n                    <div className=\"datepicker__day datepicker__day_previous-month\">{new Date(new Date(this.state.month[0].getTime()).setDate(1 - i)).getDate()}</div>\r\n                </div>\r\n            );\r\n        }\r\n        if (this.state.month[this.state.month.length - 1].getDay()) {\r\n            for (var i = 1; i < 8 - this.state.month[this.state.month.length - 1].getDay(); i++) {\r\n                emptyEndWeekdays.push(\r\n                    <div key={i} className=\"col-1-of-7 text-center datepicker__day-wrapper\">\r\n                        <div className=\"datepicker__day datepicker__day_next-month\">{i}</div>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className=\"diary\">\r\n                <div className=\"diary__header d-flex\">\r\n                    <div className=\"diary__header-month\">{this.getMonthString(this.state.chosenDay)}</div>\r\n                    <div className=\"diary__header-year\">{this.getYearString(this.state.chosenDay)}</div>\r\n                    <Button\r\n                        className={\"ml-auto diary__header-btn\" + (this.state.showndatepicker ? \" diary__header-btn-cancel\" : \" diary__header-btn-calendar\")}\r\n                        onClick={() => {\r\n                            if (this.state.showndatepicker) {\r\n                                this.setState({\r\n                                    showndatepicker: !this.state.showndatepicker,\r\n                                    month: this.getMonth(this.state.chosenDay)\r\n                                });\r\n                            } else {\r\n                                this.setState({\r\n                                    showndatepicker: !this.state.showndatepicker\r\n                                });\r\n                            }\r\n                        }}\r\n                    >\r\n                        {this.state.showndatepicker ? <Icon16Cancel /> : <Icon20CalendarOutline />}\r\n                    </Button>\r\n                </div>\r\n                <div className=\"diary__block-wrapper\">\r\n                    <div className=\"diary__block\">\r\n                        <div className={\"diary__month-wrapper\" + (this.state.animateDatepicker ? \"\" : \" datepicker_no-animation\")}>\r\n                            <div className={\"diary__month\" + (this.state.showndatepicker ? \"\" : \" diary__month_collapsed\")}>\r\n                                <div className=\"d-flex diary__weekdays\">\r\n                                    {[{ id: 1, name: \"ПН\" }, { id: 2, name: \"ВТ\" }, { id: 3, name: \"СР\" }, { id: 4, name: \"ЧТ\" }, { id: 5, name: \"ПТ\" }, { id: 6, name: \"СБ\" }, { id: 0, name: \"ВС\" }].map((day, key) => (\r\n                                        <div\r\n                                            key={key}\r\n                                            className={\"diary__weekday text-center col-1-of-7\" + (this.state.chosenDay.getDay() == day.id ? \" diary__weekday_active\" : \"\")}\r\n                                            onClick={\r\n                                                this.state.showndatepicker\r\n                                                    ? null\r\n                                                    : () => {\r\n                                                        var _day = new Date(this.state.chosenDay);\r\n                                                        if (_day.getDay() != day.id) {\r\n                                                            this.setState({ animateDatepicker: false });\r\n                                                            this.chooseDay(new Date(_day.setDate(_day.getDate() + (day.id == 0 ? 7 : day.id) - (_day.getDay() == 0 ? 7 : _day.getDay()))));\r\n                                                        }\r\n                                                        setTimeout(() => {\r\n                                                            this.setState({ animateDatepicker: true });\r\n                                                        }, 250);\r\n                                                    }\r\n                                            }\r\n                                        >\r\n                                            {day.name}\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                                {/*     КНОПКА НАЛЕВО    */}\r\n                                <Button\r\n                                    className=\"diary__change-week-btn\"\r\n                                    style={{ left: 0 }}\r\n                                    onClick={() => {\r\n                                        if (this.state.showndatepicker) {\r\n                                            var _day = new Date(this.state.month[0]);\r\n                                            _day.setMonth(_day.getMonth() - 1);\r\n                                            this.setState({ month: this.getMonth(_day) });\r\n                                        } else {\r\n                                            this.setState({ animateDatepicker: false });\r\n                                            var _day = new Date(this.state.chosenDay);\r\n                                            _day.setDate(_day.getDate() - (_day.getDay() == 0 ? 7 : _day.getDay()));\r\n                                            this.chooseDay(_day);\r\n                                            setTimeout(() => {\r\n                                                this.setState({ animateDatepicker: true });\r\n                                            }, 250);\r\n                                        }\r\n                                    }}\r\n                                >\r\n                                    <Icon24BrowserBack />\r\n                                </Button>\r\n                                {/*     КНОПКА НАПРАВО    */}\r\n                                <Button\r\n                                    className=\"diary__change-week-btn\"\r\n                                    style={{ right: 0 }}\r\n                                    onClick={() => {\r\n                                        if (this.state.showndatepicker) {\r\n                                            var _day = new Date(this.state.month[0]);\r\n                                            _day.setMonth(_day.getMonth() + 1);\r\n                                            this.setState({ month: this.getMonth(_day) });\r\n                                        } else {\r\n                                            this.setState({ animateDatepicker: false });\r\n                                            var _day = new Date(this.state.chosenDay);\r\n                                            _day.setDate(_day.getDate() + (8 - (_day.getDay() == 0 ? 7 : _day.getDay())));\r\n                                            this.chooseDay(_day, true);\r\n                                            setTimeout(() => {\r\n                                                this.setState({ animateDatepicker: true });\r\n                                            }, 250);\r\n                                        }\r\n                                    }}\r\n                                >\r\n                                    <Icon24BrowserForward />\r\n                                </Button>\r\n\r\n                                <div\r\n                                    className=\"diary__datepicker datepicker d-flex flex-wrap\"\r\n                                    style={{\r\n                                        \"--chosen-week\": `calc(${this.state.chosenWeek - 1})`\r\n                                    }}\r\n                                >\r\n                                    {emptyStartWeekdays}\r\n                                    {this.state.month.map((day, key) => (\r\n                                        <div key={key} className=\"col-1-of-7 text-center datepicker__day-wrapper\">\r\n                                            <div\r\n                                                className={\"datepicker__day\" + (day.getTime() == this.state.chosenDay.getTime() ? \" datepicker__day_active\" : \"\")}\r\n                                                onClick={() => {\r\n                                                    if (day.getTime() != this.state.chosenDay.getTime()) {\r\n                                                        if (!this.state.showndatepicker) {\r\n                                                            this.setState({ animateDatepicker: false });\r\n                                                            setTimeout(() => {\r\n                                                                this.setState({ animateDatepicker: true });\r\n                                                            }, 250);\r\n                                                        }\r\n                                                        this.chooseDay(day);\r\n                                                    }\r\n                                                }}\r\n                                            >\r\n                                                {day.getDate()}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                    {emptyEndWeekdays}\r\n                                </div>\r\n                                <div className=\"diary__datepicker-month\">{this.getRuMonth(this.state.month[0].getMonth() + 1)}</div>\r\n                                <div className=\"diary__datepicker-year\">{this.state.month[0].getFullYear()}</div>\r\n                            </div>\r\n                        </div>\r\n                        {/*                                                                     */}\r\n                        {/*                                                                     */}\r\n                        {/*                               УРОКИ                                 */}\r\n                        {/*                                                                     */}\r\n                        {/*                                                                     */}\r\n                        <div className={\"diary__lessons lessons\" + (this.state.showndatepicker ? \" diary__lessons_showndatepicker\" : \"\")}>\r\n                            {!this.state.lessonsLoading && this.state.lessons.length > 0 && <div className=\"diary__lessons-title\">Уроки</div>}\r\n                            {!this.state.lessonsLoading && this.state.lessons.map(lesson => <DiaryLesson key={lesson.id} lesson={lesson} />)}\r\n                            {!this.state.lessonsLoading && this.state.lessons.length == 0 && (\r\n                                <div class=\"text-center\" style={{ marginTop: \"50vh\" }}>\r\n                                    Уроков нет!\r\n                                </div>\r\n                            )}\r\n                            {this.state.lessonsLoading && <Spinner size=\"large\" style={{ marginTop: \"50%\" }} />}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default Home;\r\n\r\nclass DiaryDayBtn extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    getRuWeekday = dayNumber => {\r\n        switch (dayNumber) {\r\n            case 0:\r\n                return \"ВС\";\r\n            case 1:\r\n                return \"ПН\";\r\n            case 2:\r\n                return \"ВТ\";\r\n            case 3:\r\n                return \"СР\";\r\n            case 4:\r\n                return \"ЧТ\";\r\n            case 5:\r\n                return \"ПТ\";\r\n            case 6:\r\n                return \"СБ\";\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Button disabled={this.props.active} className={\"diary__week-btn diary-day-btn\" + (this.props.active ? \" diary-day-btn_active\" : \"\")} onClick={this.props.onClick}>\r\n                <div className=\"diary-day-btn__weekday\">{this.getRuWeekday(this.props.date.getDay())}</div>\r\n                <div className=\"diary-day-btn__date\">{this.props.date.getDate()}</div>\r\n            </Button>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\n\r\nclass SettingsPage extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return <div>456</div>;\r\n    }\r\n}\r\n\r\n\r\nexport default SettingsPage;\r\n","import React, { useState } from \"react\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { Root, View, Panel, PanelHeader, PanelHeaderBack, Avatar, PanelHeaderButton, FormLayout, Input, FormLayoutGroup, Button, FormStatus } from \"@vkontakte/vkui\";\r\nimport \"@vkontakte/vkui/dist/vkui.css\";\r\nimport Diary from \"./panels/Diary\";\r\nimport \"./styles.css\";\r\nimport SettingsPage from \"./panels/Settings\";\r\n\r\nclass App extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeView: \"logon\",\r\n            activePanel: \"home\",\r\n            apiToken: null,\r\n            userPicUrl: \"\",\r\n        };\r\n        this.getToken();\r\n    }\r\n\r\n    getToken = () => {\r\n        try {\r\n            bridge.send(\"VKWebAppGetAuthToken\", { app_id: 7475417, scope: \"\" }).then(\r\n                (result) => {\r\n                    this.setState({ userPicUrl: result.photo_200 });\r\n                    fetch(\"https://api.elschool.ru/vk/auth?vktoken=\" + result.access_token, {\r\n                        crossDomain: true,\r\n                        method: \"GET\",\r\n                        withCredentials: false,\r\n                    }).then(response => response.json())\r\n                    .then((apiResponse) => {\r\n                        this.setState({\r\n                            apiToken: apiResponse.token,\r\n                            activeView: 'app',\r\n                        });\r\n                        console.log(apiResponse.token);\r\n                    });\r\n                },\r\n                (error) => {\r\n                    console.log('error: ' + error);\r\n                }\r\n            );\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    hideMenu = () => {\r\n        this.setState({ activePanel: \"home\" });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <Root activeView={this.state.activeView}>\r\n                <View id=\"logon\" activePanel=\"logon_panel\">\r\n                    <Panel id=\"logon_panel\">\r\n                        <PanelHeader>Дневник</PanelHeader>\r\n                        <FormLayout>\r\n                            <FormLayoutGroup top=\"Логин\">\r\n                                <Input placeholder=\"Введите логин\" />\r\n                            </FormLayoutGroup>\r\n                            <FormLayoutGroup top=\"Пароль\">\r\n                                <Input placeholder=\"Введите пароль\" />\r\n                            </FormLayoutGroup>\r\n                            <FormLayoutGroup>\r\n                                <Button className=\"mx-auto d-block\" onClick={() => {}}>\r\n                                    Войти\r\n                                </Button>\r\n                            </FormLayoutGroup>\r\n                            <FormStatus header=\"Неправильный логин или пароль\" mode=\"error\">\r\n                                Пожалуйста, введите верные логин и пароль.\r\n                            </FormStatus>\r\n                        </FormLayout>\r\n                        <div>version 01.03.2021 15:23</div>\r\n                    </Panel>\r\n                </View>\r\n                <View id=\"app\" activePanel={this.state.activePanel}>\r\n                    <Panel id=\"home\">\r\n                        <PanelHeader\r\n                            separator={false}\r\n                            left={\r\n                                <PanelHeaderButton\r\n                                    className=\"menu-button\"\r\n                                    onClick={() => {\r\n                                        this.setState({ activePanel: \"menu\" });\r\n                                    }}\r\n                                >\r\n                                    <Avatar size={36} src={this.state.userPicUrl} />\r\n                                </PanelHeaderButton>\r\n                            }\r\n                        ></PanelHeader>\r\n                        <Diary apiToken={this.state.apiToken} />\r\n                    </Panel>\r\n                    <Panel id=\"menu\">\r\n                        <PanelHeader left={<PanelHeaderBack onClick={this.hideMenu} />}>Настройки</PanelHeader>\r\n                        <SettingsPage />\r\n                    </Panel>\r\n                </View>\r\n            </Root>\r\n        );\r\n    }\r\n}\r\nexport default App;\r\n","import \"core-js/features/map\";\r\nimport \"core-js/features/set\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}